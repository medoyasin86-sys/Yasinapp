<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FREE FIRE - SUPER SMSM EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root {
            --ff-yellow: #ffbe0b;
            --ff-orange: #fb5607;
            --ff-dark: #0b0e14;
            --ff-card: #161b22;
            --heroic-red: #ff0054;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--ff-dark);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            color: #fff;
        }

        .battle-container {
            width: 100%;
            max-width: 430px;
            background: var(--ff-dark);
            min-height: 100vh;
            border: 2px solid var(--ff-yellow);
            display: flex;
            flex-direction: column;
        }

        .game-header {
            padding: 20px;
            text-align: center;
            background: linear-gradient(180deg, #1e293b 0%, #0b0e14 100%);
            border-bottom: 3px solid var(--ff-yellow);
        }

        /* ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© */
        .character-img {
            width: 130px;
            height: 130px;
            background: url('https://api.dicebear.com/7.x/avataaars/svg?seed=Alok&backgroundColor=ffbe0b') center/cover;
            border-radius: 20px;
            margin: 0 auto 10px;
            border: 3px solid var(--ff-yellow);
            box-shadow: 0 0 20px var(--ff-orange);
        }

        .player-name { font-size: 26px; font-weight: 900; color: var(--ff-yellow); letter-spacing: 1px; margin: 5px 0; }
        .warning-tag { background: var(--ff-orange); color: #000; padding: 3px 10px; font-size: 11px; font-weight: 900; border-radius: 4px; display: inline-block; }

        .content { padding: 15px; flex: 1; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± */
        .reward-box {
            background: var(--ff-card);
            border: 2px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .coin-val { font-size: 45px; font-weight: 900; color: var(--ff-yellow); }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ */
        .rules-alert {
            background: rgba(255, 0, 84, 0.1);
            border: 1px solid var(--heroic-red);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 20px;
            color: #ff79a1;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ© */
        .btn-ff {
            width: 100%; padding: 20px; border: none; font-size: 20px; font-weight: 900;
            cursor: pointer; margin-bottom: 12px; clip-path: polygon(5% 0, 100% 0, 95% 100%, 0 100%);
        }

        .btn-booyah { background: var(--ff-yellow); color: #000; }
        .btn-defeat { background: #30363d; color: #fff; }

        /* Ø´Ø§Øª Ø§Ù„ÙØ±ÙŠÙ‚ */
        .team-chat { background: #161b22; padding: 15px; border-radius: 15px; border-top: 2px solid var(--ff-yellow); }
        .msg-list { height: 120px; overflow-y: auto; font-size: 12px; margin-bottom: 10px; }
        .msg-line { background: rgba(255,255,255,0.05); padding: 5px 10px; margin-bottom: 4px; border-right: 3px solid var(--ff-yellow); }

        .char-btn { padding: 8px; background: #30363d; border: none; color: #fff; border-radius: 5px; cursor: pointer; flex: 1; font-size: 10px; font-weight: bold; }
        .char-btn.active { background: var(--ff-yellow); color: #000; }
    </style>
</head>
<body>

<div class="battle-container">
    <header class="game-header">
        <div class="character-img"></div>
        <h1 class="player-name">DJ YASSIN - ALOK</h1>
        <span class="warning-tag">Ù…Ù‡Ù…Ø© Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„: ØªØ¹Ø²ÙŠØ² Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</span>
    </header>

    <div class="content">
        <div class="rules-alert">
            ğŸš¨ <b>ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù† Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©:</b> ØªÙ… ØµØ±Ù 1000Ø¬ Ù„Ø¯Ø¹Ù…Ùƒ ÙÙŠ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„.. ÙˆÙ„ÙƒÙ†! Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‚Ø§Ø¯Ù…ØŒ Ø£ÙŠ "Ø¨Ù„Ù„" Ø³ÙŠÙƒÙ„ÙÙƒ Ø®Ø³Ø§Ø±Ø© Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰ ÙÙˆØ±Ø§Ù‹. ÙƒÙ† Ø±Ø¬Ù„Ø§Ù‹ ÙˆØ§Ù„ØªØ²Ù…!
        </div>

        <div class="reward-box">
            <div style="font-size: 14px; color: var(--ff-yellow);">Ø¬ÙˆØ§Ù‡Ø± Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ğŸ’</div>
            <div class="coin-val" id="money">1000</div>
            <div style="font-size: 12px; font-weight: bold;">Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ</div>
        </div>

        <div class="battle-btns">
            <input type="date" id="mission-date" style="width:100%; background:#0b0e14; border:1px solid #30363d; color:#fff; padding:10px; margin-bottom:10px; text-align:center; border-radius:8px;">
            <button class="btn-ff btn-booyah" onclick="save(true)">MISSION BOOYAH! âš¡</button>
            <button class="btn-ff btn-defeat" onclick="save(false)">DEFEAT (Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹) â˜ï¸</button>
        </div>

        <div class="team-chat">
            <div style="display:flex; gap:5px; margin-bottom:10px;">
                <button class="char-btn active" onclick="setSender('Ø¨Ø§Ø¨Ø§', this)">BABA ğŸ§”</button>
                <button class="char-btn" onclick="setSender('Ù…Ø§Ù…Ø§', this)">MAMA ğŸ‘©</button>
                <button class="char-btn" onclick="setSender('Ø³ÙˆØ¨Ø± Ø³Ù…Ø³Ù…', this)">SMSM ğŸ¦¸â€â™‚ï¸</button>
            </div>
            <div class="msg-list" id="chat"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="msg" placeholder="Ø£Ø±Ø³Ù„ Ø¥Ø´Ø§Ø±Ø©.." style="flex:1; background:#0b0e14; border:1px solid #30363d; color:#fff; padding:10px; border-radius:5px;">
                <button onclick="send()" style="background:var(--ff-orange); border:none; padding:10px; color:#fff; font-weight:bold; border-radius:5px;">FIRE</button>
            </div>
        </div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAPhrEzYnHoL3ln8_5BFFyWCjx2Y-G80E0",
        authDomain: "yassinapp-20262.firebaseapp.com",
        databaseURL: "https://yassinapp-20262-default-rtdb.firebaseio.com",
        projectId: "yassinapp-20262",
        storageBucket: "yassinapp-20262.firebasestorage.app",
        messagingSenderId: "940031861888",
        appId: "1:940031861888:web:9b7600cbf80b6343"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    let currentSender = 'Ø¨Ø§Ø¨Ø§';
    const today = () => new Date().toISOString().split('T')[0];
    document.getElementById('mission-date').valueAsDate = new Date();

    function setSender(sender, btn) {
        currentSender = sender;
        document.querySelectorAll('.char-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø¶Ù…Ø§Ù† Ø§Ù„Ù€ 1000 ÙÙŠ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„)
    db.ref('yassin_money_quest').on('value', (snapshot) => {
        const data = snapshot.val() || { history: {} };
        const history = data.history || {};
        const dates = Object.keys(history);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ø£ÙˆÙ„ Ø¯Ø®ÙˆÙ„)
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø£Ù‚Ù„ Ù…Ù† 30 ÙŠÙˆÙ…ØŒ ÙÙ‡Ùˆ ÙÙŠ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„
        // Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø·Ù‚ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„ÙŠÙƒÙˆÙ† Ø£ÙƒØ«Ø± ØµØ±Ø§Ù…Ø©
        if (dates.length <= 30) {
            document.getElementById('money').innerText = "1000";
        } else {
            // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ù‚Ø§Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„
            let dryCount = 0; let wetCount = 0;
            Object.values(history).forEach(status => {
                if(status === 'dry') dryCount++; else wetCount++;
            });
            let finalMoney = (wetCount > 0 ? (dryCount * 10) : 1000);
            document.getElementById('money').innerText = finalMoney;
        }
    });

    db.ref('yassin_chat').on('value', (snapshot) => {
        const chatBox = document.getElementById('chat');
        chatBox.innerHTML = '';
        const curDate = today();
        Object.values(snapshot.val() || {}).forEach(m => {
            if(m.date === curDate) {
                chatBox.innerHTML += `<div class="msg-line"><b style="color:var(--ff-yellow)">[${m.sender}]:</b> ${m.text}</div>`;
            }
        });
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    function save(isDry) {
        const date = document.getElementById('mission-date').value;
        db.ref('yassin_money_quest/history').update({ [date]: isDry ? 'dry' : 'wet' });
    }

    function send() {
        const input = document.getElementById('msg');
        if(!input.value) return;
        db.ref('yassin_chat').push({ text: input.value, sender: currentSender, date: today() });
        input.value = '';
    }
</script>
</body>
</html>
